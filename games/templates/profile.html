{% extends "layout.html" %}
{% block content %}
<div class="user-profile-intro">
    <h2>{{ session["username"] }}'s Profile:</h2>
</div>

<div class="full-profile-container">

    <div class="left-column">
        <div class="user-profile-picture">
            <img src="{{ url_for('static', filename='default-user-icon.svg') }}" alt='userPfp' class="user-pfp">
            <h4>{{ session["username"] }}</h4>
            <div class="date_joined">
                <h4>User Since:</h4>
                <p>{{ user.date_joined }}</p>
            </div>
        </div>
        <div class="about-me">
            <h3>About Me:</h3>
            <div class="spirit-animal">
                <h4>My Spirit Animal: </h4>
                <p>{{ user.spirit_animal }}</p>
            </div>
            <div class="my-country">
                <h4>My Country: </h4>
                <p>New Zealand 🇳🇿</p>
            </div>
            <div class="favourite-genre">
                <h4>Favourite Genre: </h4>
            </div>
            <div class="on-platforms">
                <h4>On Platforms:</h4>
                <div class="profile-tag">🐧 Linux</div>
                <div class="profile-tag">🍎 Mac</div>
                <div class="profile-tag">🪟 Windows</div>
            </div>
        </div>
    </div>

    <div class="profile-reviews">
        <h2>All Your Reviews:</h2>
        <form method="get" action="{{ url_for('profile_bp.profile') }}">
            <label for="sort">Sort by:</label>
            <select id="sort" name="sort" onchange="this.form.submit()">
                <option value="newest" {% if sort_option == 'newest' %}selected{% endif %}>Newest</option>
                <option value="oldest" {% if sort_option == 'oldest' %}selected{% endif %}>Oldest</option>
            </select>
        </form>

        {% if reviews %}
        <ul>
            {% for review in reviews %}
            <li>
                {{ review.game.title }}:
                <span class="review-stars">
                    {% for _ in range(1, 6) %}
                        {% if _ <= review.rating %}
                            <i class="fas fa-star checked"></i>
                        {% else %}
                            <i class="fas fa-star"></i>
                        {% endif %}
                    {% endfor %}
                </span>
                "{{ review.comment }}"
            </li>
            {% endfor %}
        </ul>
        {% else %}
        <p>You haven't posted any reviews yet.</p>
        {% endif %}
    </div>


    <div class="right-column">
    <div class="profile-wishlist">
        <h2>
            <a href="{{ url_for('wishlist_bp.wishlist') }}">
                View My Wishlist
                <img src="{{ url_for('static', filename='heart-icon.svg') }}" alt="profileHeart" class="profile-heart">
            </a>
        </h2>
    </div>
    <div class="profile-logout">
        <h2>
            <a href="{{ url_for('auth_bp.logout') }}">
                Log Out
            </a>
        </h2>
    </div>
</div>


    </div>
{% endblock %}
